@prefix : <#> .
@prefix g: <http://graphity.org/ontology#> .
@prefix gldp: <http://ldp.graphity.org/ontology#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix sioc: <http://rdfs.org/sioc/ns#> .
@prefix sp: <http://spinrdf.org/sp#> .
@prefix spin: <http://spinrdf.org/spin#> .
@prefix spl: <http://spinrdf.org/spl#> .
@prefix ldp: <http://www.w3.org/ns/ldp#> .
@prefix void: <http://rdfs.org/ns/void#> .
@prefix sd: <http://www.w3.org/ns/sparql-service-description#> .
@prefix lda: <http://purl.org/linked-data/api/vocab#> .
@prefix vann: <http://purl.org/vocab/vann/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix doap: <http://usefulinc.com/ns/doap#> .
@prefix dbpedia: <http://dbpedia.org/resource/> .
@prefix gfb-app: <http://graph.facebook.com/schema/application#> .

: a owl:Ontology ;
    owl:imports g: , sioc: , lda: ;
    owl:versionInfo "1.0.7" ;
    dct:title "Graphity Linked Data Platform ontology" ;
    rdfs:label "Graphity Linked Data Platform ontology" ;
    dct:description "Graphity LDP configuration ontology. Should be imported and reused by all extending applications" ;
    dct:created "2012-10-26T01:04:00+03:00"^^xsd:dateTime ;
    dct:modified "2012-12-19T02:29:00+03:00"^^xsd:dateTime, "2013-02-20T19:00:00+03:00"^^xsd:dateTime ;
    vann:preferredNamespaceUri "http://ldp.graphity.org/ontology#" ;
    vann:preferredNamespacePrefix "gldp";
    foaf:homepage <http://ldp.graphity.org/ontology> ;
    dct:license <http://www.opendatacommons.org/licenses/pddl/1.0/> ;
    dct:creator <http://semantic-web.dk/#martynas> ;
    foaf:isPrimaryTopicOf <../ontology> .
    # rdfs:seeAlso <../sparql> .

:Dataset a void:Dataset ;
    dct:title "The dataset of this application" ;
    # foaf:homepage <../dataset> ;
    rdfs:isDefinedBy : .
    # void:sparqlEndpoint <../sparql> .

#_:sparql a sd:Service ;
#    dct:title "Local SPARQL service" ;
#    sd:endpoint <../sparql> ;
#    sd:supportedLanguage sd:SPARQL11Query .

<../services/dydra> a sd:Service ;
    dct:title "Dydra SPARQL service" ;
    foaf:homepage <http://dydra.com> ;
    sd:endpoint <http://dydra.com/graphity/ldp/sparql> .

<http://graphity.org/#ldp> a doap:Project ;
    dct:title "Graphity Linked Data Platform" ;
    doap:repository <https://github.com/Graphity/graphity-ldp.git> ;
    doap:browse <https://github.com/Graphity/graphity-ldp> ;
    doap:bug-database <https://github.com/Graphity/graphity-ldp/issues> ;
    doap:maintainer <http://semantic-web.dk/#martynas> ;
    doap:programming-language dbpedia:XSLT,
	<http://dbpedia.org/resource/Java_%28programming_language%29> .

# PROPERTIES

:facebookApp a owl:ObjectProperty ;
    rdfs:label "has Facebook app" ;
    rdfs:isDefinedBy : ;
    rdfs:range gfb-app:type .

gfb-app:type rdfs:label "Facebook application" ;
    rdfs:isDefinedBy gfb-app: .

ldp:pageOf a owl:ObjectProperty ;
    rdfs:domain ldp:Page ;
    rdfs:range ldp:Container ;
    rdfs:isDefinedBy ldp: .

# RESOURCES

<..> a sioc:Site, foaf:Document ;
    dct:title "Graphity Linked Data Platform" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset ;
    rdfs:seeAlso : .

<../ontology> a foaf:Document ;
    foaf:primaryTopic : ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../instances> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Instances" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../ontologies> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Ontologies" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../classes> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Classes" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../properties> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Properties" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../services> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Services" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../queries> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "Queries" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../modes> a foaf:Document, ldp:Container, sioc:Container ;
    sioc:has_host <..> ;
    dct:title "XSLT modes" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

<../sparql> a foaf:Document ;
    dct:title "SPARQL endpoint" ;
    rdfs:isDefinedBy : ;
    void:inDataset :Dataset .

# RESOURCE CLASSES

:Resource a owl:Class ;
    rdfs:subClassOf foaf:Document, sioc:Item, lda:ItemEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty sioc:has_host ;
		owl:hasValue <..>
	] ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/{path: .*}"
	] ;
    spin:constraint [ a :DescribeTemplate ] ;
    rdfs:label "Resource" ;
    rdfs:isDefinedBy : .

:OntologyDocResource a owl:Class ;
    rdfs:subClassOf foaf:Document ,
	[ a owl:Restriction ;
		owl:onProperty sioc:has_host ;
		owl:hasValue <..>
	] ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/ontology"
	] ;
    spin:constraint [ a :DescribeTopicTemplate ] ;
    rdfs:label "Ontology document resource" ;
    rdfs:isDefinedBy : .

:InstancesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../instances>
	] ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/instances?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    spin:constraint [ a :DescribeInstancesTemplate ] ;
    rdfs:label "Instances page list class" ;
    rdfs:isDefinedBy : .

:InstancesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../instances>
	] ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/instances?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    spin:constraint [ a :DescribeInstancesTemplate ] ;
    rdfs:label "Instances page table class" ;
    rdfs:isDefinedBy : .

:InstancesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../instances>
	] ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/instances?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    spin:constraint [ a :DescribeInstancesTemplate ] ;
    rdfs:label "Instances page input class" ;
    rdfs:isDefinedBy : .

:OntologiesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/ontologies?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../ontologies>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Ontologies page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:OntologiesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/ontologies?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../ontologies>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Ontologies page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:OntologiesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/ontologies?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../ontologies>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Ontologies page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:ClassesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/classes?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../classes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Classes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Class
	    ] ;
    rdfs:isDefinedBy : .

:ClassesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/classes?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../classes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Classes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Class
	    ] ;
    rdfs:isDefinedBy : .

:ClassesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/classes?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../classes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Classes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type owl:Class
	    ] ;
    rdfs:isDefinedBy : .

:PropertiesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/properties?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../properties>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Properties page resource class" ;
    spin:constraint [ a :DescribePropertiesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:PropertiesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/properties?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../properties>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Properties page resource class" ;
    spin:constraint [ a :DescribePropertiesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:PropertiesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/properties?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../properties>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Properties page resource class" ;
    spin:constraint [ a :DescribePropertiesTemplate ;
	    g:type owl:Ontology
	    ] ;
    rdfs:isDefinedBy : .

:ServicesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/services?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../services>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Services page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sd:Service
	    ] ;
    rdfs:isDefinedBy : .

:ServicesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/services?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../services>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Services page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sd:Service
	    ] ;
    rdfs:isDefinedBy : .

:ServicesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/services?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../services>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Services page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sd:Service
	    ] ;
    rdfs:isDefinedBy : .

:QueriesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/queries?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../queries>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Queries page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sp:Query
	    ] ;
    rdfs:isDefinedBy : .

:QueriesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/queries?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../queries>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Queries page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sp:Query
	    ] ;
    rdfs:isDefinedBy : .

:QueriesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/queries?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../queries>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Queries page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sp:Query
	    ] ;
    rdfs:isDefinedBy : .

:ModesPageListResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/modes?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../modes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Modes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type g:XSLTMode
	    ] ;
    rdfs:isDefinedBy : .

:ModesPageTableResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/modes?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23TableMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../modes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:TableMode
	] ;
    rdfs:label "Modes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type g:XSLTMode
	    ] ;
    rdfs:isDefinedBy : .

:ModesPageInputResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/modes?limit={limit: [0-9]+}&offset={offset: [0-9]+}&mode=http%3A%2F%2Fgraphity.org%2Fontology%23InputMode"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../modes>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:InputMode
	] ;
    rdfs:label "Modes page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type g:XSLTMode
	    ] ;
    rdfs:isDefinedBy : .

:ContainersPageResource a owl:Class ;
    rdfs:subClassOf foaf:Document, ldp:Page, lda:ListEndpoint ,
	[ a owl:Restriction ;
		owl:onProperty lda:uriTemplate ;
		owl:hasValue "/containers?limit={limit: [0-9]+}&offset={offset: [0-9]+}"
	] ,
	[ a owl:Restriction ;
		owl:onProperty ldp:pageOf ;
		owl:hasValue <../containers>
	] ,
	[ a owl:Restriction ;
		owl:onProperty g:mode ;
		owl:hasValue g:ListMode
	] ;
    rdfs:label "Containers page resource class" ;
    spin:constraint [ a :DescribeInstancesTemplate ;
	    g:type sioc:Container
	    ] ;
    rdfs:isDefinedBy : .

# QUERIES & TEMPLATES

:DescribeInstancesTemplate a spin:Template ;
    spin:body :DescribeInstances ;
    spin:constraint [ a       spl:Argument ;
		spl:predicate g:type ;
		spl:valueType rdfs:Resource
	] ;
    rdfs:isDefinedBy : .

:DescribeInstances    a       sp:Describe, sp:Query ;
      sp:resultNodes (_:instanceVar) ;
      sp:text """DESCRIBE ?instance WHERE {
    {
        SELECT ?instance
        WHERE {
            ?instance a ?type .
        }
    } .
}"""^^xsd:string ;
      sp:where ([ a       sp:SubQuery ;
                  sp:query
                          [ a       sp:Select ;
                            sp:resultVariables (_:instanceVar) ;
                            sp:where ([ sp:object
                                                [ sp:varName "type"^^xsd:string
                                                ] ;
                                        sp:predicate rdf:type ;
                                        sp:subject _:instanceVar
                                      ])
                          ]
                ]) .

_:instanceVar  sp:varName "instance"^^xsd:string .

# ====

:DescribePropertiesTemplate a spin:Template ;
    spin:body :DescribeProperties ;
    rdfs:isDefinedBy : .

:DescribeProperties    a       sp:Describe, sp:Query ;
      sp:resultNodes (_:propertyVar) ;
      sp:text """PREFIX owl: <http://www.w3.org/2002/07/owl#>
DESCRIBE ?property WHERE {
    {
PREFIX owl: <http://www.w3.org/2002/07/owl#>
        SELECT ?property
        WHERE {
            {
                ?property a owl:ObjectProperty .
            }
            UNION
            {
                ?property a owl:DatatypeProperty .
            } .
        }
    } .
}"""^^xsd:string ;
      sp:where ([ a       sp:SubQuery ;
                  sp:query
                          [ a       sp:Select ;
                            sp:resultVariables (_:propertyVar) ;
                            sp:where ([ a       sp:Union ;
                                        sp:elements (([ sp:object owl:ObjectProperty ;
                                                      sp:predicate rdf:type ;
                                                      sp:subject _:propertyVar
                                                    ]) ([ sp:object owl:DatatypeProperty ;
                                                      sp:predicate rdf:type ;
                                                      sp:subject _:propertyVar
                                                    ]))
                                      ])
                          ]
                ]) .

_:propertyVar  sp:varName "property"^^xsd:string .

# ====

:DescribeTemplate a spin:Template ;
    spin:body :DefaultDescribe .

:DefaultDescribe    a       sp:Describe, sp:Query ;
      sp:resultNodes (spin:_this) ;
      sp:text """DESCRIBE ?this"""^^xsd:string .

spin:_this sp:varName "this"^^xsd:string .

# ====

:DescribeTopicTemplate a spin:Template ;
    spin:body :DescribeTopic .

:DescribeTopic    a       sp:Describe ;
      sp:resultNodes (_:topicVar) ;
      sp:text """PREFIX foaf: <http://xmlns.com/foaf/0.1/>
DESCRIBE ?topic WHERE {
    ?topic foaf:isPrimaryTopicOf ?this .
}"""^^xsd:string ;
      sp:where ([ sp:object spin:_this ;
                  sp:predicate foaf:isPrimaryTopicOf ;
                  sp:subject _:topicVar
                ]) .

_:topicVar  sp:varName "topic"^^xsd:string .